language: nodejs

before_script:
  - npm install
  - node_modules/.bin/tsc

script:
  - npm run test

deploy:
  - provider: script
    script: git fetch --unshallow && git push https://govuk-dfe-bat-deployment-user:$AZURE_WA_PASSWORD@bat-node-prototype-app.scm.azurewebsites.net:443/bat-node-prototype-app.git HEAD:refs/heads/master
    on: master